{% extends 'base.html' %}
{% load static %}
{% block content %}
  <h2>Songs List</h2>
    {% block styles %}
       <link rel="stylesheet" href="{% static 'albums_list.css' %}">
     {% endblock %}
  <div>
    {% for song in songs %}
      <div class="song">
        <p>{{ song.title }} - Uploaded on: {{ song.uploaded_at }}</p>
        <button class="toggle-reviews-btn" data-song-id="{{ song.id }}">查看评价</button>

        <div class="review-section" id="reviews-for-song-{{ song.id }}" style="display: none;">
            <h4>Reviews</h4>
            {% for review in song.comments.all %}
            <div class="review">
                <p>Ranking: {{ review.rating }}</p>
                <p>Review: {{ review.comment }}</p>
            </div>
            {% empty %}
            <p>No reviews yet</p>
            {% endfor %}
        </div>
      </div>
    {% empty %}
      <p>No songs have been uploaded yet.</p>
    {% endfor %}
  </div>
    <div>
       <a href="{% url 'index' %}" class="button" style="text-decoration: none; color: black;">Return</a>
    </div>
    {% block javascript %}
       <script src="{% static 'toggle_reviews.js' %}"></script>
    {% endblock %}
{% endblock %}
